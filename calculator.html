<!DOCTYPE html>
<html lang="ar" dir="rtl" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <title>حاسبة السعرات والماكروز - Gym Master</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    
    <nav class="navbar navbar-expand-lg bg-dark border-bottom border-secondary mb-4">
        <div class="container">
            <a class="navbar-brand fw-bold text-primary" href="index.html">GYM MASTER</a>
            <a href="index.html" class="btn btn-outline-light btn-sm">رجوع للرئيسية</a>
        </div>
    </nav>

    <div class="container pb-5">
        <div class="card p-4 mx-auto shadow-lg" style="max-width: 700px;">
            <h2 class="text-center mb-4 text-primary">حاسبة السعرات & الماكروز الذكية</h2>
            
            <div class="row g-3">
                <div class="col-md-12 text-center mb-2">
                    <label class="form-label d-block fw-bold">الـجـنـس:</label>
                    <div class="btn-group w-50" role="group">
                        <input type="radio" class="btn-check" name="gender" id="male" value="male" checked>
                        <label class="btn btn-outline-primary" for="male">ذكر</label>
                        <input type="radio" class="btn-check" name="gender" id="female" value="female">
                        <label class="btn btn-outline-danger" for="female">أنثى</label>
                    </div>
                </div>

                <div class="col-md-4">
                    <label class="form-label">الوزن (كجم)</label>
                    <input type="number" id="weight" class="form-control" placeholder="75">
                </div>
                <div class="col-md-4">
                    <label class="form-label">الطول (سم)</label>
                    <input type="number" id="height" class="form-control" placeholder="175">
                </div>
                <div class="col-md-4">
                    <label class="form-label">العمر (سنة)</label>
                    <input type="number" id="age" class="form-control" placeholder="25">
                </div>

                <div class="col-md-6">
                    <label class="form-label">مستوى النشاط اليومي</label>
                    <select id="activity" class="form-select">
                        <option value="1.2">خامل (قليل الحركة)</option>
                        <option value="1.375">نشاط خفيف (تمرين 1-3 أيام)</option>
                        <option value="1.55" selected>نشاط متوسط (تمرين 3-5 أيام)</option>
                        <option value="1.725">نشاط عالي (تمرين 6-7 أيام)</option>
                        <option value="1.9">نشاط عالي جداً (رياضي محترف)</option>
                    </select>
                </div>

                <div class="col-md-6">
                    <label class="form-label">الهدف الخاص بك</label>
                    <select id="goal" class="form-select">
                        <option value="-500">خسارة الدهون (تنشيف)</option>
                        <option value="0" selected>الحفاظ على الوزن</option>
                        <option value="300">زيادة عضلية (تضخيم خفيف)</option>
                        <option value="500">زيادة وزن (تضخيم قوي)</option>
                    </select>
                </div>

                <div class="col-12 mt-4">
                    <button onclick="calculateAdvanced()" class="btn btn-primary w-100 py-2 fw-bold fs-5">احسب خطتك الغذائية</button>
                </div>
            </div>

            <div id="resultBox" class="result-box mt-4 p-4 d-none">
                <h3 class="text-center text-white mb-3">احتياجك اليومي: <span id="totalCalories" class="text-warning display-6 fw-bold">0</span> سعرة</h3>
                <p class="text-center text-muted small">تم حساب الماكروز بنسبة (40% بروتين / 35% كارب / 25% دهون) تقريباً</p>
                
                <div class="row mt-3 g-2">
                    <div class="col-4">
                        <div class="macro-item">
                            <h5>بروتين</h5>
                            <span id="proteinVal" class="fs-4 fw-bold text-white">0</span>g
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="macro-item">
                            <h5 style="color: #f1c40f;">كارب</h5>
                            <span id="carbVal" class="fs-4 fw-bold text-white">0</span>g
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="macro-item">
                            <h5 style="color: #e67e22;">دهون</h5>
                            <span id="fatVal" class="fs-4 fw-bold text-white">0</span>g
                        </div>
                    </div>
                </div>
                
                <div class="alert alert-info mt-3 text-center mb-0">
                    يمكنك طباعة هذا النظام أو حفظه كصورة
                </div>
            </div>
        </div>
    </div>

    <script>
        function calculateAdvanced() {
            const w = parseFloat(document.getElementById('weight').value);
            const h = parseFloat(document.getElementById('height').value);
            const a = parseFloat(document.getElementById('age').value);
            const gender = document.querySelector('input[name="gender"]:checked').value;
            const activity = parseFloat(document.getElementById('activity').value);
            const goal = parseFloat(document.getElementById('goal').value);

            if (!w || !h || !a) {
                alert("يرجى ملء جميع الخانات (الوزن، الطول، العمر)!");
                return;
            }

            // معادلة Mifflin-St Jeor (الأكثر دقة)
            let bmr;
            if (gender === 'male') {
                bmr = (10 * w) + (6.25 * h) - (5 * a) + 5;
            } else {
                bmr = (10 * w) + (6.25 * h) - (5 * a) - 161;
            }

            // حساب السعرات الكلية TDEE + الهدف
            const tdee = Math.round((bmr * activity) + goal);

            // حساب الماكروز (تقسيم رياضي شائع)
            // بروتين 2 جرام لكل كيلو من وزن الجسم (أو نسبة مئوية)
            // هنا سنستخدم نسب مئوية مرنة: 30% بروتين، 40% كارب، 30% دهون (متوازن)
            // أو بناء على الوزن: البروتين 2 * الوزن
            
            let protein = Math.round(w * 2.2); // 2.2 جرام لكل كيلو (للاعبين)
            let fat = Math.round((tdee * 0.25) / 9); // 25% من السعرات دهون
            // الباقي كاربوهيدرات
            let remainingCals = tdee - ((protein * 4) + (fat * 9));
            let carbs = Math.round(remainingCals / 4);

            // عرض النتائج
            document.getElementById('resultBox').classList.remove('d-none');
            document.getElementById('totalCalories').innerText = tdee;
            document.getElementById('proteinVal').innerText = protein;
            document.getElementById('carbVal').innerText = carbs;
            document.getElementById('fatVal').innerText = fat;
        }
    </script>
</body>
</html>